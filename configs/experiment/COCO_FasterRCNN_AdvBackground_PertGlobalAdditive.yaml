# @package _global_

defaults:
  - COCO_FasterRCNN

  # fgsm_eps1.75 in training, pgd10_eps2_step1 for validation and test.
  - /attack@model.modules.input_adv_training: [object_detection_adversary_additive, fgsm]
  - /attack@model.modules.input_adv_validation: [object_detection_adversary_additive, pgd]
  - /attack@model.modules.input_adv_test: [object_detection_adversary_additive, pgd]
  # Visualize x_adv in test.
  - /attack/callbacks@model.modules.input_adv_test.callbacks: [progress_bar, image_visualizer]

  # Override the gain function.
  - override /attack/gain@model.modules.input_adv_training.gain: rcnn_class_nonbackground
  - override /attack/gain@model.modules.input_adv_validation.gain: rcnn_class_nonbackground
  - override /attack/gain@model.modules.input_adv_test.gain: rcnn_class_nonbackground

  # We don't have Background-Error objective yet. Use ZeroAP50 instead.

task_name: "COCO_FasterRCNN_AdvBackground_PertGlobalAdditive"
